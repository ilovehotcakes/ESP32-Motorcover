<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" type="image/x-icon" href="./img/favicon_60x60.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="./img/touch_icon_180x180.png" />
    <title>ESP32 Yun</title>
    <link rel="stylesheet" type="text/css" href="./index.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="./index.js"></script>
</head>
<body>
<div class="canvas">
    <!-- Motor controls to move the motor -->
    <div id="motor_controls" class="glass container">
        <div class="motor-controls-header default">
            <h3 class="name-txt">Living Room Window</h3>
            <h3 class="serial-txt">%AP_SSID%</h3>
            <label class="advanced-controls-cbx">
                <input type="checkbox" onclick="toggleAdvancedControls()" unchecked>
                <span class="dropdown-cbx">
            </label>
            <div class="more-settings-button">
                <button class="dropdown-cbx" onclick="toggleMotorSettings()" unchecked>
            </div>
        </div>

        <div id="motor_controls_body" class="motor-controls-body default">
            <div class="percent-slider default">
                <input type="range" id="percent_slider" class="glass" onchange="motorMove(this)" value="%SLIDER%" min="0" max="100" step="1">
                <span class="tick one-tck"></span>
                <span class="tick two-tck"></span>
                <span class="tick three-tck"></span>
                <span class="tick four-tck"></span>
                <span class="tick five-tck"></span>
                <span class="marker zero-mkr">0</span>
                <span class="marker hundred-mkr">100</span>
            </div>
            <div class="open-stop-close default">
                <button class="open-btn button1" value="0" onclick="motorMove(this)">Open</button>
                <button class="stop-btn button1" onclick="motorHttpRequest('stop')">Stop</button>
                <button class="close-btn button1" value="100" onclick="motorMove(this)">Close</button>
            </div>
        </div>

        <div id="advanced_controls" class="motor-controls-body default hide">
            <div class="forward-backward default">
                <div class="desktop-only">
                    <button class="backward-btn button1" onmousedown="motorHttpRequest('backward')" onmouseup="motorHttpRequest('stop')">Backward</button>
                    <button class="forward-btn button1" onmousedown="motorHttpRequest('forward')" onmouseup="motorHttpRequest('stop')">Forward</button>
                </div>
                <div class="mobile-only">
                    <button class="backward-btn button1" ontouchstart="motorHttpRequest('backward')" ontouchend="motorHttpRequest('stop')">Backward</button>
                    <button class="forward-btn button1" ontouchstart="motorHttpRequest('forward')" ontouchend="motorHttpRequest('stop')">Forward</button>
                </div>
            </div>
            <div class="horizontal-separator"></div>
            <div class="min-zero-max default">
                <button class="set-min-btn button2" onclick="motorHttpRequest('set-min')">Set Min</button>
                <span class="left-spr vertical-separator"></span>
                <button class="zeroing-btn button2" onclick="motorHttpRequest('zero')">Zero</button>
                <span class="right-spr vertical-separator"></span>
                <button class="set-max-btn button2" onclick="motorHttpRequest('set-max')">Set Max</button>
            </div>
        </div>
    </div>



    <!-- To display and change some motor settings -->
    <div id="motor_settings" class="default default-hide">
        <div class="motor-settings-header container">
            <button class="back-btn form-btn" onclick="toggleMotorSettings()">Back</button>
            <h2 class="motor-settings-header-txt">Motor Settings</h2>
        </div>

        <div id="motor_settings_1" class="four-settings glass container">
            <div class="one-forth-height default">
                <h3 class="setting-name-txt">Sync Settings</h3>
                <label class="toggle">
                    <input type="checkbox" id="sync_settings" onclick="syncSettings()">
                    <span class="toggle-cbx">
                </label>
            </div>

            <div class="one-forth-pos horizontal-separator"></div>
            <div class="one-forth-pos one-forth-height default clickable" onclick="openSettingDialog('Current', 'Current (mA)', 'Current', 1, 2)">
                <h3 id="current_setting_name" class="setting-name-txt">Current (mA)</h3>
                <h3 id="current_setting_opening" class="setting-opening-txt setting-value-txt">75</h3>
                <h3 id="current_setting_closing" class="setting-value-txt">200</h3>
            </div>

            <div class="one-half-pos horizontal-separator"></div>
            <div class="one-half-pos one-forth-height default clickable" onclick="openSettingDialog('Velocity', 'Velocity (Hz)', 'Velocity', 0.1, 2)">
                <h3 id="velocity_setting_name" class="setting-name-txt">Velocity (Hz)</h3>
                <h3 id="velocity_setting_opening" class="setting-opening-txt setting-value-txt">3.0</h3>
                <h3 id="velocity_setting_closing" class="setting-value-txt">3.0</h3>
            </div>

            <div class="three-forths-pos horizontal-separator"></div>
            <div class="three-forths-pos one-forth-height default clickable" onclick="openSettingDialog('Acceleration', 'Acceleration (Hz/s)', 'Acceleration', 0.1, 2)">
                <h3 id="acceleration_setting_name" class="setting-name-txt">Acceleration (Hz/s)</h3>
                <h3 id="acceleration_setting_opening" class="setting-opening-txt setting-value-txt">0.5</h3>
                <h3 id="acceleration_setting_closing" class="setting-value-txt">0.5</h3>
            </div>
        </div>


        <div id="motor_settings_2" class="three-settings glass container">
            <div class="one-third-height default">
                <h3 class="setting-name-txt">Direction</h3>
                <label class="toggle">
                    <input type="checkbox" id="direction" onclick="checkboxHttpRequest('direction')">
                    <span class="toggle-cbx">
                </label>
            </div>

            <div class="one-third-pos horizontal-separator"></div>
            <div class="one-third-pos one-third-height default clickable" onclick="openSettingDialog('Full Steps', 'Full Steps (per turn)', 'Full Steps', 1)">
                <h3 id="full_steps_setting_name" class="setting-name-txt">Full Steps (per turn)</h3>
                <h3 id="full_steps_setting_closing" class="setting-value-txt">200</h3>
            </div>

            <div class="two-thirds-pos horizontal-separator"></div>
            <div class="two-thirds-pos one-third-height default clickable" onclick="openSettingDialog('Microsteps', 'Microsteps (per step)', 'Microsteps', 1)">
                <h3 id="microsteps_setting_name" class="setting-name-txt">Microsteps (per step)</h3>
                <h3 id="microsteps_setting_closing" class="setting-value-txt">16</h3>
            </div>
        </div>


        <div id="motor_settings_3" class="two-settings glass container">
            <div class="one-half-height default">
                <h3 class="setting-name-txt">Fastmode</h3>
                <label class="toggle">
                    <input type="checkbox" id="fastmode" onclick="checkboxHttpRequest('fastmode')">
                    <span class="toggle-cbx">
                </label>
            </div>

            <div class="one-half-pos horizontal-separator"></div>
            <div class="one-half-pos one-half-height default clickable" onclick="openSettingDialog('Fastmode Threshold', 'Fastmode Threshold', 'Threshold', 1)">
                <h3 id="fastmode_threshold_setting_name" class="setting-name-txt">Threshold</h3>
                <h3 id="fastmode_threshold_setting_closing" class="setting-value-txt">33</h3>
            </div>
        </div>


        <div id="motor_settings_4" class="stallguard two-settings glass container">
            <div class="one-half-height default">
                <h3 class="setting-name-txt">Stallguard</h3>
                <label class="toggle">
                    <input type="checkbox" id="stallguard" onclick="checkboxHttpRequest('stallguard')">
                    <span class="toggle-cbx">
                </label>
            </div>

            <div class="one-half-pos horizontal-separator"></div>
            <div class="one-half-pos one-half-height default clickable" onclick="openSettingDialog('Stallguard Threshold', 'Stallguard Threshold', 'Threshold', 1)">
                <h3 id="stallguard_threshold_setting_name" class="setting-name-txt">Threshold</h3>
                <h3 id="stallguard_threshold_setting_closing" class="setting-value-txt">10</h3>
            </div>
        </div>
    </div>



    <!-- Dialog box for submitting new values for motor settings -->
    <form id="setting_dialog" class="setting-dialog glass container" method="GET">
        <div class="dialog-prompt default">
            <h5 id="dialog_setting_prompt">SETTINGPROMPT</h5>
        </div>

        <div class="dialog-title">
            <button type="reset" class="form-btn" onclick="cancelForm()">Cancel</button>
            <h3 id="dialog_title" class="dialog-title-txt">SETTINGNAME</h3>
            <button type="reset" class="form-btn" onclick="submitForm(this)">Submit</button>
        </div>

        <div id="form_input" class="form-input one-setting glass container">
            <div id="opening_setting" class="one-half-height default hide">
                <h3 class="setting-name-txt">Opening</h3>
                <input type="number" id="opening_setting_input">
            </div>

            <div id="opening_setting_separator" class="one-half-pos horizontal-separator hide"></div>
            <div id="closing_setting" class="whole-height default">
                <h3 id="closing_setting_text" class="setting-name-txt">Closing</h3>
                <input type="number" id="closing_setting_input">
            </div>
        </div>

        <div id="dialog_hint" class="dialog-hint">
            <h5 class="grey-color">Lorem ipsum dolor sit amet consectetur adipisicing elit. Illo, debitis dolore cumque laboriosam ad nesciunt autem obcaecati, nihil est error, expedita libero totam accusamus quo rem porro enim consequuntur facere.</h5>
        </div>
    </form>
</div>
</body>
</html>